---
published: true
title: Palantir图分析应用-07
layout: post
date: '2019-07-14 08:34:00 +0800'
categories: Palantir
tags:
  - Palantir图分析应用
  - Palantir介绍
excerpt: Palantir介绍-07-图分析应用
---
## 概要介绍

在计算机科学和数学领域中，**图是由节点及节点之间的边组成**，在表示一个节点到另一个节点的移动时，边可以是有向或者无向的。

Palantir的**图分析应用**通过**将事件/实体/文档建模为节点**，**将关系建模为边**的一个空间距离来反映这个定义，在Palantir图分析上定义的关系可以是有方向的，也可以是无方向的。一些终端用户更喜欢**将图分析应用称为“白板”**；对于不具备数学或计算机科学背景知识的用户来说，更易理解这个称呼。

图分析应用常常是分析师在使用Palantir系统用时最多的地方。在图分析应用中，用户可以**对选定的对象**进行**上下文关联检索**、**布局**用于分析和报告的网络图，用户还可以在这里查到对象之间的通讯指向。

在本文中，将详细介绍图分析视图中可供使用的**布局工具**、**环形菜单**和**默认助手**。

## 布局工具

图分析应用的**顶部工具栏**是一些和布局工具有关的按钮，工具栏中的**一部分按钮会影响分析图上的节点和边的布局**，**一部分按钮允许用户用文字和绘图来修饰分析图**，**一部分允许用户改变选择的类型，还有一部分允许用户操作系统中的对象**。

我最常用的是**自动布局选项**，在这里将对它做详细介绍，还有很多其他选项，会在以后的文章中再做讨论。

### 布局类型

用户可用的布局显示在子菜单中，这里简要描述**这些布局如何改变分析图**，有些布局也有一些**配置选项**，用户可以通过点击**布局齿轮按钮**来访问。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-1.png"/></div>
<br>

**如果应用这些布局，用户将会得到如下结果:**

### 自动布局

自动布局用来设置数据的一种方式，以**显示两个对象之间的分离度**以及**一个对象的高关联度**。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-2.png"/></div>
<br>

### 圆型布局

圆型布局将对象设置成一个**带有圆心的圆**，**圆的周围由对象填充**。该布局对于显示**一个对象的高关联度非常有用**。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-3.png"/></div>
<br>

### 网格布局

网格布局会创建了一个**对象网格**；该布局**基于属性值将对象组合在一起**，并将它们移动到分析图周围以方便看到密度差异。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-4.png"/></div>
<br>

### 层次布局

层次布局**在顶部选定一个对象**，然后**将图设置成树状结构**，对根据网络位置来可视化网络连接非常有用。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-5.png"/></div>
<br>

## 环形菜单

环形菜单是Palantir中对象的**上下文菜单**，根据分析师的使用场景为他们提供了许多选项。在图分析中**选择对象后单击右键访问菜单**，菜单以动画方式弹出。

下面是一个带有选择子菜单的环形菜单示例：

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-6.png"/></div>
<br>

环形菜单的功能有：

1. **发布** —— 将所选对象相关的所有**新数据**发布到基础库，方便其他用户提取新数据并在自己的分析调查中使用它。

2. **选择** —— 会连带弹出一个**可供多个选项的菜单**。

	- **关联节点** —— 选择与当前所选节点有一个**分离度相关联的所有节点**。
    
	- **流入节点** —— 选择与当前节点相关联而且这些**节点流入所选节点**，例如：该选项将选择Kevin Bacon的父母。
    
	- **流出节点** —— 选择与当前节点相关联、接收来自选定节点流入的节点，例如：该选项将选择Kevin Bacon的孩子。
    
	- **反选节点** —— 取消选择已选定的节点，并**选择取消选择节点以外的节点**。
    
	- **节点之间的关联** —— 如果选中两个或多个对象则该选项被激活，将选择被选对象之间关联的所有边，对两个对象之间已经关联合并的所选事件非常有用。
    
3. **关联合并** —— 如果图谱上有3个以上互相关联的对象，可使用该功能将中心的对象关联合并，可有效地将图谱转换为一根关联线连接两个实体，关联线实际成为了第三个实体。该功能当对象之间存在很多事件的图谱上非常有用，比如：可视化的事务日志，它可以有效地整理视图。

4. **相关检索** —— 允许用户对所选对象进行**上下文相关检索**。

5. **查看** —— **在浏览器打开所选对象详细信息**。

6. **合并/取消合并** —— 如果同时选中多个对象，则会显示“合并”选项；允许用户**将多选对象合并成一个对象**，这对于在图谱中**删除重复对象**非常有用，一旦两个对象被合并，它们将由一个对象来表示，该对象具有之前那些对象的所有关系与属性。后续文章将会详细讨论合并功能，它对高效使用系统非常重要。**取消合并是合并的反向操作**，被用于**将合并的对象拆分回初始状态。

7. **删除** —— 从图谱中**移除对象**，但对象的**数据没有被删除**，仅从图展示中删除，对象仍然可以通过检索找到。

8. **创建组** —— 如果选中多个对象则该选项显示，将为选定的对象创建一个命名组。

我在**上下文菜单**中经常使用的功能是**相关检索**，用来做演示效果非常好，可以非常动态地展现关联对象。下一篇文章中详细介绍相关检索，先知道它的存在。

## 助手

图谱分析应用由于有诸多的分析助手显得内容更加丰富，并且接口（API）可扩展，默认状态下可用的助手有：

* 过滤器
* 流
* 文件夹
* 直方图
* 历史
* 选择
* 时间图表
* 时间线/时间图
* 过滤器

助手允许用户保存一些过滤器以在分析过程中用于分析图。过滤器可以用于**过滤分析图上的数据**，也可以用于**将数据加载到分析图上**，并且可以包含许多**嵌套条件**以进行更精准的实体和关系过滤。

下面例子中，我构建了一个**包含阿波罗13中的5个演员姓名的过滤器**；所选条件是：对象类型是演员（Actor），而姓名可以是5个可能中的一个。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-7.png"/></div>
<br>

```
如果用一个“if”语句表达，条件如下：

(object.type == "Actor" && (object.name == "Tom Hanks" ||

 object.name == "Ed Harris" ||

 object.name == "Bill Paxton" ||

 object.name == "Gary Sinise" ||

 object.name == "Kevin Bacon"))
 ```

如果用户选择这个过滤器，可以执行许多操作，这些操作由助手底部的选项决定:

1. **添加到图谱（Add to Graph）** —— 点击该按键则所有匹配对象将被添加到分析图并选中，包括来自基础库的对象。如果对象已经在分析图上，那么它们就会被添加到所选的集合中。根据排序标准，可以选择增加和减少添加到图谱中匹配项的数量：关系、开始日期和结束日期，意味着分析师可以将最新的5个对象添加到图谱中。

2. **构建文件夹（Build Folder）** —— 点击该项则将所有匹配对象添加到一个文件夹，包括来自基础库的对象。根据排序标准，可以选择增加和减少添加到图谱中匹配项的数量：关系、开始日期和结束日期，意味着分析师可以将最新的5个对象添加到文件夹中。

3. **使用过滤器（Apply as Filter）** —— 在图谱上过滤激活的匹配选项以及其他未激活的节点；如果用户在图谱上选中所有对象，则只能选到被激活的。在上面的例子中，如果使用过滤器，只有5个节点可以选择。

4. **清除过滤器（Clear Filter）** —— 应用过滤器（上文的选项）时匹配项变为激活状态，这个**“清除过滤器”** 使所有图谱的节点再次可用，即重置过滤条件。

5. **选中匹配的内容（Select Matching）** —— 与限制可选择的节点相比，该按钮可简单选中符合过滤标准的节点。
       
当用户创建一个过滤器，可以选择将其发布到基础库，即所有其他分析人员也可以访问过滤器。这是一个非常有用的协同功能。

## 流

流助手使图谱能以一种动态的方式显示底层数据含义，流可以创建以显示:

1. 实体之间的事件计算；
2. 事件属性的和/平均值；
3. 事件的持续时间；
4. 事件属性的大小；

目前，我的数据模型中没有显示流的最佳图；因此我将调整**数据模型**并在另一文章中介绍流。

## 文件夹

文件夹可以用来**根据系统中存在项来创建数据集**；文件夹助手有四个默认的动态文件夹，它们是：

1. **图谱上的对象** —— 包含图谱上所有对象的动态文件夹；
2. **最近浏览的事件** —— 包含所有最近浏览过的事件的动态文件夹；
3. **最近浏览的实体** —— 包含所有最近浏览过的实体的动态文件夹；
4. **最近浏览的文档** —— 包含所有最近浏览过的文档的动态文件夹。

用户还可以**选择以多种方式向助手添加新文件夹**，包括：

1. 从其他助手如过滤器和直方图；
2. 从其他应用如档案视图；
3. 拖放到文件夹中；

下面的例子是一个由阿波罗13的演员组成的文件夹，它是由过滤器助手构建：

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-8.png"/></div>
<br>

可以注意到文件夹名称旁边有灰色数字，这给出该文件夹中存在未读项目的数量，对于Apollo 13演员来说，这是文件夹中未被用户浏览过档案的演员数量。

## 直方图

直方图使用户能够**对当前图谱选中的对象进行自顶而下分析**。如果用户对直方图进行选择并向下钻取，则图谱上的选项更改而且更新直方图显示的内容。例如：用户选择包含混合对象的图谱中的一部分，然后使用直方图只选择类型为movie的实体，然后只选择那些类型属性为“Crime”的电影。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-9.png"/></div>
<br>

结果显示了两部符合这一标准的电影：**玩尽杀绝（Wild Things）和沉睡者（Sleepers）**，也可以注意到列表中还有其他类型，这是由于属性值的多重性，即一个对象的一个属性可拥有多个值。

开发人员可以**通过创建近似值并将其部署为本体插件来影响属性的呈现方式**，以便进行分析。

## 历史

历史助手显示了**分析师在调查中的全部分析路径**。分析师的每一个变更都存储在版本数据库中，这样，分析师在任何时候都可以**撤销并回到任意深度的步骤**，然后再重做任意深度的分析。这功能非常强大，它允许分析师测试假设，而不用担心丢失之前的工作成果。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-10.png"/></div>
<br>

如果用户返回到历史的任何一点，然后在历史中创建一个分支，而之前分析的所有步骤将被收缩起来。用户仍然可以进入这个分支，并选择任何以前的状态进行返回。

个人认为，历史助手是一个类似软件源代码控制系统，因为所有的变更都是可逆的，也存在分支概念。

## 选择

在之前的文章中，讨论了**浏览器应用中的摘要视图**。选择助手复制该视图显示所选对象的属性、媒体、注释、关联实体、关联事件和关联文档。此助手仅**用于显示数据值和丰富分析图**，对用户来说，要编辑他们需要显示的任意数据，则需要进入浏览器应用程序。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-11.png"/></div>
<br>

## 时间线/时间图

时间线助手是Palantir系统中用时最多的插件。3.9版本发布了称为时间图的**实验性助手**，而在3.10版本安装时它已经被提升为**默认助手**。这两个助手都**允许用户对图分析应用上的数据进行时间分析**，**时间线只显示时间戳的计数或者两个时间戳之间的持续时间**；时间图也显示这个视图，但时间图还**允许用户更改图表以显示给定日期点的属性值**，时间图的另一个更新是包含一个**播放按钮**，单击该按钮时，**会使周期过滤器自动从左向右移动**。

**如果图谱中的对象具有日期元数据或包含日期属性，那么时间线助手的将左侧显示出来**。选择对象或属性将会更新时间线视图，显示所选时间范围内事件发生的次数，用户在范围内的缩放会更加细化并显示更高级别的细节。下面例子展示了图谱上演员的出生日期，上面是缩小版，下面是放大版。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-12.png"/></div>
<br>

用户可以选择时间线上的一个部分，按选定的时间段对分析图进行过滤；如果应用该过滤器，则只选择具有匹配时间属性或元数据的对象。单击时间线上的柱状图可选择该时间范围内的对象。

使用时间过滤器有助于显示图谱实体随着时间变化的趋势，点击和拖动过滤器向左/向右可改变选择的对象。时间图显示与时间线相同的视图，下面例子是缩小的出生日期的图表。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-13.png"/></div>
<br>

时间图也可以被配置成**显示趋势**，例如：显示**电影预算**与**上映日期的图表**；这或许表明，在00年代上映的电影预算最高。

下一篇文章中，将介绍**相关检索**，看看如何在图谱无头绪时使用它。

## Palantir系列文章

1.[硅谷最神秘的独角兽Palantir-01](https://www.bobinsun.cn/palantir/2019/07/14/palantir-01/)
2.[什么是Palantir-02](https://www.bobinsun.cn/palantir/2019/07/14/Palantir-02/)
3.[Palantir本体(Ontology)-03](https://www.bobinsun.cn/palantir/2019/07/14/Palantir-03/)
4.[Palantir数据集成-04](https://www.bobinsun.cn/palantir/2019/07/14/palantir-04/)
5.[Palantir应用程序-05](https://www.bobinsun.cn/palantir/2019/07/14/palantir-05/)
6.[Palantir浏览器应用-06](https://www.bobinsun.cn/palantir/2019/07/14/Palantir-06/)
7.[Palantir图分析应用-07](https://www.bobinsun.cn/palantir/2019/07/14/Palantir-07/)
8.[Palantir SWOT分析-08](https://www.bobinsun.cn/palantir/2019/07/22/Palantir-08/)
9.[Palantir分析：商业模式画布、SWOT、垄断特征、以及7个商业模式](https://www.bobinsun.cn/palantir/2019/07/26/Palantir-Analysis-09/)
