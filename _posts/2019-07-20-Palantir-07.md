---
published: false
title: Palantir介绍-07-图分析应用
layout: post
date: '2019-07-14 08:34:00 +0800'
categories: Palantir
tags:
  - Palantir图分析应用
  - Palantir介绍
excerpt: Palantir介绍-07-图分析应用
---
## Palantir介绍-07-图分析应用

---

在计算机科学和数学领域中，`图`是由`节点`以及`节点之间的边`组成；在表示`一个节点到另一个节点的移动时`，`边可以是有方向或者无方向`。

Palantir的`图分析应用`通过将`事件/实体/文档`建模为节点、将关联建模为边的一个空间距离来反映这个定义，在Palantir图分析上定义的`关联`可以是`有方向`，也可以是`无方向`。与我一起工作过的一些终端用户更喜欢`将图分析应用称为“白板”`；对于那些不具备数学或计算机科学背景知识的用户来说，这个称呼更易理解。

Palantir`图分析应用`常常是分析师在使用Palantir系统时`耗费最多`时间的地方。

在图分析应用中，用户可以`对选定的对象`进行`上下文关联检索、布局`用于分析或报告的网络图，而且用户还可以在这里查看到`对象之间的通讯指向`。

> 在本文中，将详细介绍图分析视图中可供使用的**布局工具、环形菜单和默认助手**。

### 布局工具

图分析应用`顶部工具栏`是一些和`布局工具`有关的`按钮`，工具栏中的一些`按钮会影响分析图上的节点和边的布局`，一些工具允许用户用`文字和绘图`来`修饰分析图`，一些则允许用户`改变选择的类型`，还有一些`允许用户操作系统中的对象`。

我最常用的是`自动布局选项`，所以在这里我将对它做详细介绍；还有很多其他选项，我会在以后的文章中再做讨论。

### 布局类型

用户可用的布局显示在子菜单中，这里也简要描述了`这些布局如何改变分析图`；有些布局也有一些`配置选项`，用户可以通过点击`布局齿轮按钮`来访问。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-1.png"/></div>
<br>

**如果应用这些布局，用户将会得到如下结果:**

### 自动布局

这是用来`设置数据的一种方式`，以`显示两个对象之间的分离度`以及`一个对象的高关联度`。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-2.png"/></div>
<br>

### 圆形布局

这将对象设置成一个`带有圆心的圆`，`圆的周围由对象填充`。这个布局`对于显示一个对象的高关联度`非常有用。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-3.png"/></div>
<br>

### 网格布局

这将会创建了一个`对象网格`；这个布局`基于属性值将对象组合在一起`，并将它们移动到`分析图周围`以方便看到`密度差异`。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-4.png"/></div>
<br>

### 分层布局

这个布局`在顶部选定一个对象`，然后`将图设置成树状结构`；这对`根据网络的位置`来`可视化网络的连接`非常有用。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-5.png"/></div>
<br>

### 环形菜单

环形菜单是Palantir中对象的`上下文菜单`，根据分析师的选择该菜单`为他们提供了许多选项`。在图分析中`选择对象后单击右键访问菜单`，菜单以`动画方式弹出`。

**下面是一个带有选择子菜单的环形菜单示例:**

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-6.png"/></div>
<br>

### 环形菜单的功能有:

* **发布**——这允许将所选对象相关的任何**新数据**发布到基础库，以便其他用户提取新数据并在自己的调查中使用它。

* **选择**——这会连带弹出一个`可供多个选项`的菜单。

	- **关联节点**——它选择与当前所选节点有一个**分离度相关联的所有节点**。
    
	- **流入节点**——选择与当前节点相关联而且这些**节点流入所选节点**；例如，该选项将选择Kevin Bacon的父母。
    
	- **流出节点**——选择与当前节点相关联、接收来自选定节点流入的节点；例如，该选项将选择Kevin Bacon的孩子。
    
	- **反选节点**——取消选择已选定的节点，并**选择取消选择节点以外的节点**。
    
	- **节点之间的关联**——如果选中两个或多个对象则该选项被激活，这将选择被选对象之间关联的所有边；这对两个对象之间已经关联合并的所选事件非常有用。
    
* **关联合并**——如果分析图上有最少3个以上互相关联的对象，则可使用该功能将中心的对象关联合并，这将有效地将分析图转换为一根关联线连接两个实体，关联线实际成为了第三个实体。这个功能在对象之间存在很多事件的分析图上非常有用，比如可视化的事务日志，因为它可以有效地整理视图。

* **相关检索**——允许用户对所选对象进行`上下文相关检索`。

* **查看**——在浏览器打开`所选对象详细信息`，这在之前的文章中讨论过。

* **合并/取消合并**——如果`同时选中多个对象`，则会`显示“合并”选项`；这允许用户`将这些对象合并成一个对象`，这在分析图中`删除重复对象`非常有用。一旦两个对象被合并，它们将由一个对象来表示，该对象具有之前那些对象的所有关联和属性。我将在以后的文章中讨论合并，因为它对有效使用系统非常重要。`取消合并`是反向操作，它被用于用户希望将合并的`对象拆分`回原来的状态。

* **删除**——这将从分析图中`移除对象`，但是对象的`数据没有被删除`，对象仍然可以通过检索找到。

* **创建组**——如果选中多个对象则该选项显示，这将为选定的对象创建一个命名组。

**我在`上下文菜单`中经常使用的功能是`相关检索`，这个用来做演示效果非常好，因为这可以非常动态地展现关联对象。我将在下一篇文章中详细介绍相关检索，重要的是要知道它的存在。**

### 助手

> 图分析应用由于有诸多的助手显得内容更加丰富，并且接口（API）可进行扩展；默认情况下可用的助手有：

* 过滤器
* 流
* 文件夹
* 直方图
* 历史
* 选择
* 时间图表
* 时间线/时间图
* 过滤器

这个助手`允许用户保存一些过滤器`以`在分析过程中应用于分析图`。过滤器可以应用于`过滤分析图上的数据`，也可以用于`将数据加载到分析图上`，并且可以包含许多`嵌套条件`以`使过滤条件相当复杂`。

下面的示例中，我构建了一个`包含阿波罗13中的5个演员姓名的过滤器`；我所选择的条件是：`对象类型是演员`（Actor），而姓名可以是5个可能中的一个。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-7.png"/></div>
<br>

```
如果用一个“if”语句表达，条件如下：

(object.type == "Actor" && (object.name == "Tom Hanks" ||

 object.name == "Ed Harris" ||

 object.name == "Bill Paxton" ||

 object.name == "Gary Sinise" ||

 object.name == "Kevin Bacon"))
 ```

> 如果用户选择这个过滤器，他们可以执行许多操作，这些操作由助手底部的选项决定:

* **添加到分析图（Add to Graph）**——点击这个按键则所有的匹配对象将被添加到分析图并被选择上，这包括来自基础库的对象。如果对象已经在分析图上，那么它们就会被添加到所选的集合中。根据一些排序标准，可以选择增加和减少添加到分析图中匹配项的数量：关联、开始日期和结束日期，这意味着分析师可以将最新的5个对象添加到分析图中。

* **构建文件夹（Build Folder）**——点击这项则将所有匹配对象添加到一个文件夹，其中包括来自基础库的对象。根据一些排序标准，可以选择增加和减少添加到分析图中匹配项的数量：关联、开始日期和结束日期，这意味着分析师可以将最新的5个对象添加到文件夹中。

* **应用过滤器（Apply as Filter）**——在分析图上集合与过滤项激活的匹配选项以及其他未激活的节点；如果用户在分析图上所有对象进行选择，则只能选到被激活的。在上面的例子中，如果应用过滤器，只有5个节点可以选择。

* **清除过滤器（Clear Filter）**——应用过滤器（上文的选项）时匹配项变为激活状态，这个“清除过滤器”使所有分析图的节点再次可用。
选中匹配的内容（Select Matching）——与限制可选择的节点相比，这个按钮简单选中符合过滤标准的节点。
       
**当用户创建一个过滤器，他可以选择将其发布到基础库，这意味着所有其他分析人员也可以访问过滤器；这是一个非常有用的协同功能。**

### 流

> 流助手使分析图能以一种动态的方式显示底层数据含义，流可以创建以显示:

* 实体之间的事件计算；
* 事件属性的和/平均值；
* 事件的持续时间；
* 事件属性的大小；

目前，我的数据模型中没有显示流的最佳图；因此我将调整数据模型并在另一文章中介绍流。

### 文件夹

> 文件夹可以用来根据系统中存在项来创建数据集；文件夹助手有四个默认的动态文件夹，它们是：

* **分析图上的对象**——包含分析图上所有对象的动态文件夹；
* **最近浏览的事件**——包含所有最近浏览过的事件的动态文件夹；
* **最近浏览的实体**——包含所有最近浏览过的实体的动态文件夹；
* **最近浏览的文档**——包含所有最近浏览过的文档的动态文件夹。

> 用户还可以选择以多种方式向助手添加新文件夹，包括：

* 从其他助手如过滤器和直方图；
* 从其他应用如档案视图；
* 拖放到文件夹中；

**下面的例子是一个由阿波罗13的演员组成的文件夹，它是由过滤器助手构建：**

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-8.png"/></div>
<br>

你会注意到文件夹名称旁边有灰色数字，这给出该文件夹中存在未读项目的数量，对于Apollo 13演员来说，这是文件夹中未被用户浏览过档案的演员数量。

### 直方图

直方图使用户能够对当前分析图选中的对象进行自顶而下分析。如果用户对直方图进行选择并向下钻取，则分析图上的选项更改而且更新直方图显示的内容。例如，用户选择包含混合对象的分析图的一部分，然后使用直方图只选择类型为movie的实体，然后只选择那些类型属性为“Crime”的电影。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-9.png"/></div>
<br>

上面的例子显示了两部符合这一标准的电影：玩尽杀绝（Wild Things）和沉睡者（Sleepers），你可能还注意到列表中还有其他类型，这是由于属性值的多重性，即一个对象的一个属性可以拥有多个值。

开发人员可以通过创建近似值并将其部署为本体插件来影响属性的呈现方式，以便进行分析；这个例子是宾纳近似。

### 历史

历史助手显示了分析师在调查中的全部分析路径。分析师的每一个变更都存储在版本数据库中，这样，分析师在任意时候都可以撤销并回到任意深度的步骤，然后再重做任意深度的分析。这功能非常强大，因为它允许分析师测试假设，而不用担心丢失之前的工作成果。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-10.png"/></div>
<br>

如果用户返回到历史的任何一点，然后在历史中创建了一个分支，而之前分析的所有步骤将被收缩起来。用户仍然可以进入这个分支，并选择任何以前的状态进行返回。

我常认为，历史助手是一个类似软件源代码控制系统，因为所有的变更都是可逆的，也存在分支概念。

### 选择

在之前的文章中，我讨论了浏览器应用中的摘要视图。选择助手复制该视图显示所选对象的属性、媒体、注释、关联实体、关联事件和关联文档。此助手仅用于显示数据值和丰富分析图，对用户来说，要编辑他们需要显示的任意数据，则需要进入浏览器应用程序。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-11.png"/></div>
<br>

### 时间线/时间图

时间线助手是Palantir系统中用了很长时间的主要插件。3.9版本发布了称为时间图的实验性助手，而在3.10版本安装时它已经被提升为默认助手。这两个助手都允许用户对图分析应用上的数据进行时间分析，时间线只显示时间戳的计数或者两个时间戳之间的持续时间；时间图也显示了这个视图，但它还允许用户更改图表以显示给定日期点的属性值，时间图的另一个更新是包含一个播放按钮，单击该按钮时，会使周期过滤器自动从左向右移动。

如果分析图中的对象具有日期元数据或包含日期属性，那么这些将在时间线助手的左侧显示出来。选择对象或属性将会更新时间线视图，以显示在时间范围内事件发生的次数，因为用户在范围内的缩放会更加细化并显示更高级别的细节。这个例子展示了在分析图上演员的出生日期，上面是缩小版下面是放大版。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-12.png"/></div>
<br>

用户可以在时间线上选择其中一个部分，以便按选定的时间段对分析图进行过滤；如果应用该过滤器，那么只选择具有匹配时间属性或元数据的对象。单击时间线上的柱状图可选择该时间范围内的对象。

使用这个过滤器有助于显示随着时间变化的趋势，点击和拖动过滤器向左/向右以改变可供选择的对象

时间图显示与时间线相同的视图，本示例示缩小的出生日期的图表。

<div align="center"><img src="https://www.bobinsun.cn/assets/images/palantir-07-13.png"/></div>
<br>

时间图也可以被配置成显示趋势，例如显示电影预算与上映日期的图表；这或许表明，在00年代上映的电影预算最高。

在下一篇文章中，我将介绍相关检索，看看如何在分析图或无头绪中如何使用它。